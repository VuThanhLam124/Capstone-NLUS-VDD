# QUY TẮC NGHIỆP VỤ TPC-DS (Chỉ chứa LOGIC, không chứa mô tả cột)

=== QUY TẮC SQL ===
1. KHÔNG thêm filter (WHERE) nếu câu hỏi KHÔNG yêu cầu
2. Chỉ SELECT các cột cần thiết, không thêm cột thừa
3. KHÔNG bịa cột/bảng không có trong schema
4. Luôn dùng alias cho bảng
5. Output ONLY the SQL query, no explanation.

=== SEMANTIC MAPPING (Từ khóa → Cột/Giá trị) ===
DOANH THU:
- "doanh thu" → SUM(net_paid) [KHÔNG phải sales_price!]
- "bán chạy nhất" → SUM(quantity)

KÊNH MẶC ĐỊNH:
- "cửa hàng/store" → store_sales (ss)
- "online/web" → web_sales (ws)
- "catalog" → catalog_sales (cs)
- (không nói rõ kênh) → store_sales [MẶC ĐỊNH]
- "trả hàng" (không rõ) → store_returns [MẶC ĐỊNH]

OPERATORS:
- "từ X trở lên" = >= X

=== VALUE MAPPINGS ===
QUỐC GIA (c_birth_country - UPPERCASE):
VN | JAPAN | UNITED STATES | UNITED KINGDOM | CA

GIỚI TÍNH (cd_gender):
Nam=M | Nữ=F

HÔN NHÂN (cd_marital_status):
Độc thân=S | Kết hôn=M | Ly hôn=D | Góa=W

TÍN DỤNG (cd_credit_rating):
Low | Good | High Risk | Elite

=== COLUMN DISAMBIGUATION ===
"quốc tịch/sinh ra" → c_birth_country
"đang sống" → ca_country
"Tiến sĩ" danh xưng → c_salutation='Dr.'
"Tiến sĩ PhD" học vấn → cd_education_status='PhD'
"giảm giá" → ss_ext_discount_amt (NOT p_discount_amt)

=== CỘT KHÔNG TỒN TẠI ===
ca_birth_country | c_birth_date_sk | c_gender | s_addr_sk
i_list_price | ss_order_number | p_discount_amt | d_quarter
category table (dùng i.i_category)
